if("undefined"==typeof SUBSCRIPTION_STATUS_CONFIG)var SUBSCRIPTION_STATUS_CONFIG={STORE_URL:"http://store.risevision.com/~rvi/store/",PRODUCT_PATH:"#/product/productId/",STORE_SERVER_URL:"https://store-dot-rvaserver2.appspot.com/",PATH_URL:"v1/company/companyId/product/status?pc="};angular.module("risevision.widget.common.subscription-status",["risevision.widget.common.service.store"]).directive("subscriptionStatus",["$templateCache","storeService",function(t,e){return{restrict:"AE",require:"?ngModel",scope:{productId:"@",productCode:"@",companyId:"@"},template:t.get("subscription-status-template.html"),link:function(t,s,r,i){t.productCode&&t.companyId&&e.getSubscriptionStatus(t.productCode,t.companyId).then(function(e){t.subscribed=!1,e&&(t.subscribed=!0,t.subscriptionMessage=e.status)}),i&&t.$watch("subscribed",function(t){i.$setViewValue(t)})}}}]),angular.module("risevision.widget.common.subscription-status").filter("productUrl",function(){return function(t){if(t){var e=SUBSCRIPTION_STATUS_CONFIG.STORE_URL;return e+=SUBSCRIPTION_STATUS_CONFIG.PRODUCT_PATH.replace("productId",t)}return""}}),angular.module("risevision.widget.common.service.store",[]).service("storeService",["$http","$q",function(t,e){this.getSubscriptionStatus=function(s,r){var i=e.defer(),o=SUBSCRIPTION_STATUS_CONFIG.STORE_SERVER_URL+SUBSCRIPTION_STATUS_CONFIG.PATH_URL.replace("companyId",r)+s;return t.get(o).then(function(t){t&&t.data&&t.data.length?i.resolve(t.data[0]):i.reject("No response")}),i.promise}}]),function(){try{app=angular.module("risevision.widget.common.subscription-status")}catch(t){app=angular.module("risevision.widget.common.subscription-status",[])}app.run(["$templateCache",function(t){"use strict";t.put("subscription-status-template.html",'<a href="{{productId | productUrl}}" target="_blank">\n  <span ng-class="{\'product-trial\':subscribed, \'product-expired\':!subscribed}">\n    <h3>\n      {{subscriptionMessage}}\n      <i class="fa fa-question-circle icon-right"></i>\n    </h3>\n  </span>\n</a>\n')}])}();