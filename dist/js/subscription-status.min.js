if("undefined"==typeof SUBSCRIPTION_STATUS_CONFIG)var SUBSCRIPTION_STATUS_CONFIG={STORE_SERVER_URL:"https://store-dot-rvaserver2.appspot.com/",PATH_URL:"/v1/company/companyId/product/status?pc="};angular.module("risevision.widget.common.subscription-status",["risevision.widget.common.service.store"]).directive("subscriptionStatus",["$templateCache",function(e){return{restrict:"AE",require:"?ngModel",scope:{productId:"@"},template:e.get("subscription-status-template.html"),link:function(e,t,r,s){e.subscribed=!0,e.subscriptionMessage="Free",e.productId}}}]),angular.module("risevision.widget.common.service.store",[]).service("storeService",["$http","$q",function(e,t){function r(e){for(var t=[],r=0;r<e.getNumberOfRows();r++){var s={id:e.getValue(r,0),text:e.getValue(r,0)+(e.getValue(r,1)?" - "+e.getValue(r,1):"")};t.push(s)}return t}function s(e){var t=angular.lowercase(e.search),r="where ((lower(code) like '%"+t+"%') or (lower(name) like '%"+t+"%')) order by "+e.sort+" limit "+e.count+" offset "+e.cursor;return r}var o={search:"",cursor:0,count:50,sort:"code"};this.getInstruments=function(e){var n=t.defer();return e=angular.extend(o,e),jsapiLoader.getVisualization().then(function(t){var o=CONFIG.FINANCIAL_SERVER_URL+"lookup/local",i=new t.Query(o,{sendMethod:"scriptInjection"});i.setQuery(s(e)),i.send(function(e){if(e)if(e.isError())n.reject(e.getMessage());else{var t=e.getDataTable();n.resolve(r(t))}else n.reject("No response")})}),n.promise},this.getInstrumentsRemote=function(e){var n=t.defer();return e=angular.extend(o,e),jsapiLoader.getVisualization().then(function(t){var o=CONFIG.FINANCIAL_SERVER_URL+"lookup/remote",i=new t.Query(o,{sendMethod:"scriptInjection"});i.setQuery(s(e)),i.send(function(e){if(e)if(e.isError())n.reject(e.getMessage());else{var t=e.getDataTable();n.resolve(r(t))}else n.reject("No response")})}),n.promise}}]),function(){try{app=angular.module("risevision.widget.common.subscription-status")}catch(e){app=angular.module("risevision.widget.common.subscription-status",[])}app.run(["$templateCache",function(e){"use strict";e.put("subscription-status-template.html","<div class=\"row\">\n  <span ng-class=\"{'product-trial':subscribed, 'product-expired':!subscribed}\">\n    <h3>\n      {{subscriptionMessage}}\n    </h3>\n  </span>\n</div>\n")}])}();